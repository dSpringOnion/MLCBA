{"ast":null,"code":"import _objectSpread from\"/Users/danielpark/Documents/testClaudeCode/visionBasedVehicleBehavior/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useState}from'react';import{useDropzone}from'react-dropzone';import{motion,AnimatePresence}from'framer-motion';import{Upload,File,X,CheckCircle}from'lucide-react';import Button from'../ui/Button';import ProgressBar from'../ui/ProgressBar';import{uploadVideo}from'../../utils/api';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FileUpload=_ref=>{let{onUploadComplete,onUploadStart}=_ref;const[uploadProgress,setUploadProgress]=useState(null);const[isUploading,setIsUploading]=useState(false);const[uploadedFile,setUploadedFile]=useState(null);const onDrop=useCallback(async acceptedFiles=>{const file=acceptedFiles[0];if(!file)return;// Validate file type\nif(!file.type.startsWith('video/')){toast.error('Please upload a video file');return;}// Validate file size (max 100MB)\nif(file.size>100*1024*1024){toast.error('File size must be less than 100MB');return;}setUploadedFile(file);setIsUploading(true);onUploadStart===null||onUploadStart===void 0?void 0:onUploadStart();try{const result=await uploadVideo(file,progress=>{setUploadProgress(progress);});toast.success('Video processed successfully!');onUploadComplete(result);}catch(error){console.error('Upload error:',error);toast.error('Failed to process video. Please try again.');}finally{setIsUploading(false);setUploadProgress(null);}},[onUploadComplete,onUploadStart]);const{getRootProps,getInputProps,isDragActive}=useDropzone({onDrop,accept:{'video/*':['.mp4','.avi','.mov','.wmv','.flv','.webm']},multiple:false,disabled:isUploading});const removeFile=()=>{setUploadedFile(null);setUploadProgress(null);};return/*#__PURE__*/_jsx(\"div\",{className:\"w-full max-w-2xl mx-auto\",children:/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:!uploadedFile?/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0.95},transition:{duration:0.2},children:/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},getRootProps()),{},{className:\"\\n                relative border-2 border-dashed rounded-xl p-8 text-center cursor-pointer\\n                transition-all duration-300 ease-in-out\\n                \".concat(isDragActive?'border-primary-500 bg-primary-50 scale-105':'border-gray-300 hover:border-primary-400 hover:bg-gray-50',\"\\n                \").concat(isUploading?'pointer-events-none opacity-60':'',\"\\n              \"),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),/*#__PURE__*/_jsx(motion.div,{animate:isDragActive?{scale:1.1}:{scale:1},transition:{duration:0.2},children:/*#__PURE__*/_jsx(Upload,{className:\"\\n                  mx-auto h-12 w-12 mb-4 transition-colors duration-300\\n                  \".concat(isDragActive?'text-primary-600':'text-gray-400',\"\\n                \")})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:isDragActive?'Drop your video here':'Upload a video file'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"Drag & drop your video file here, or click to browse\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-400 mb-6\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Supported formats: MP4, AVI, MOV, WMV, FLV, WebM\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Maximum file size: 100MB\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"lg\",disabled:isUploading,icon:/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4\"}),children:\"Choose File\"})]}))},\"dropzone\"):/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},className:\"bg-white rounded-xl border border-gray-200 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(File,{className:\"h-8 w-8 text-primary-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 truncate\",children:uploadedFile.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[(uploadedFile.size/(1024*1024)).toFixed(2),\" MB\"]})]})]}),!isUploading&&/*#__PURE__*/_jsx(\"button\",{onClick:removeFile,className:\"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"h-5 w-5\"})})]}),uploadProgress&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(ProgressBar,{progress:uploadProgress.percentage,color:\"primary\",showPercentage:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-2 text-sm text-gray-500\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[(uploadProgress.loaded/(1024*1024)).toFixed(1),\" MB of\",' ',(uploadProgress.total/(1024*1024)).toFixed(1),\" MB\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[uploadProgress.percentage,\"%\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:isUploading?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-primary-600\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Processing video...\"})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-success-600\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Ready to process\"})]})})]},\"file-preview\")})});};export default FileUpload;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}